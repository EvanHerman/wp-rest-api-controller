!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(b,c){this.element=b,this.$element=a(this.element),this.doc=a(document),this.win=a(window),this.settings=a.extend({},g,c),"object"==typeof this.$element.data("tipso")&&a.extend(this.settings,this.$element.data("tipso"));for(var d=Object.keys(this.$element.data()),e={},i=0;i<d.length;i++){var j=d[i].replace(f,"");if(""!==j){j=j.charAt(0).toLowerCase()+j.slice(1),e[j]=this.$element.data(d[i]);for(var k in this.settings)k.toLowerCase()==j&&(this.settings[k]=e[j])}}this._defaults=g,this._name=f,this._title=this.$element.attr("title"),this.mode="hide",this.ieFade=!h,this.settings.preferedPosition=this.settings.position,this.init()}function c(b){var c=b.clone();c.css("visibility","hidden"),a("body").append(c);var d=c.outerHeight(),e=c.outerWidth();return c.remove(),{width:e,height:d}}function d(a){a.removeClass("top_right_corner bottom_right_corner top_left_corner bottom_left_corner"),a.find(".tipso_title").removeClass("top_right_corner bottom_right_corner top_left_corner bottom_left_corner")}function e(b){var f,g,h,i=b.tooltip(),j=b.$element,k=b,l=a(window),m=10,n=k.settings.background,o=k.titleContent();switch(void 0!==o&&""!==o&&(n=k.settings.titleBackground),j.parent().outerWidth()>l.outerWidth()&&(l=j.parent()),k.settings.position){case"top-right":g=j.offset().left+j.outerWidth(),f=j.offset().top-c(i).height-m,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f<l.scrollTop()?(f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({"border-bottom-color":n,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("bottom_right_corner"),i.find(".tipso_title").addClass("bottom_right_corner"),i.find(".tipso_arrow").css({"border-left-color":n}),i.removeClass("top-right top bottom left right"),i.addClass("bottom")):(i.find(".tipso_arrow").css({"border-top-color":k.settings.background,"border-bottom-color":"transparent ","border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("top_right_corner"),i.find(".tipso_arrow").css({"border-left-color":k.settings.background}),i.removeClass("top bottom left right"),i.addClass("top"));break;case"top-left":g=j.offset().left-c(i).width,f=j.offset().top-c(i).height-m,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f<l.scrollTop()?(f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({"border-bottom-color":n,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("bottom_left_corner"),i.find(".tipso_title").addClass("bottom_left_corner"),i.find(".tipso_arrow").css({"border-right-color":n}),i.removeClass("top-right top bottom left right"),i.addClass("bottom")):(i.find(".tipso_arrow").css({"border-top-color":k.settings.background,"border-bottom-color":"transparent ","border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("top_left_corner"),i.find(".tipso_arrow").css({"border-right-color":k.settings.background}),i.removeClass("top bottom left right"),i.addClass("top"));break;case"bottom-right":g=j.offset().left+j.outerWidth(),f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f+c(i).height>l.scrollTop()+l.outerHeight()?(f=j.offset().top-c(i).height-m,i.find(".tipso_arrow").css({"border-bottom-color":"transparent","border-top-color":k.settings.background,"border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("top_right_corner"),i.find(".tipso_title").addClass("top_left_corner"),i.find(".tipso_arrow").css({"border-left-color":k.settings.background}),i.removeClass("top-right top bottom left right"),i.addClass("top")):(i.find(".tipso_arrow").css({"border-top-color":"transparent","border-bottom-color":n,"border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("bottom_right_corner"),i.find(".tipso_title").addClass("bottom_right_corner"),i.find(".tipso_arrow").css({"border-left-color":n}),i.removeClass("top bottom left right"),i.addClass("bottom"));break;case"bottom-left":g=j.offset().left-c(i).width,f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f+c(i).height>l.scrollTop()+l.outerHeight()?(f=j.offset().top-c(i).height-m,i.find(".tipso_arrow").css({"border-bottom-color":"transparent","border-top-color":k.settings.background,"border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("top_left_corner"),i.find(".tipso_title").addClass("top_left_corner"),i.find(".tipso_arrow").css({"border-right-color":k.settings.background}),i.removeClass("top-right top bottom left right"),i.addClass("top")):(i.find(".tipso_arrow").css({"border-top-color":"transparent","border-bottom-color":n,"border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.addClass("bottom_left_corner"),i.find(".tipso_title").addClass("bottom_left_corner"),i.find(".tipso_arrow").css({"border-right-color":n}),i.removeClass("top bottom left right"),i.addClass("bottom"));break;case"top":g=j.offset().left+j.outerWidth()/2-c(i).width/2,f=j.offset().top-c(i).height-m,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f<l.scrollTop()?(f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({"border-bottom-color":n,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass("bottom")):(i.find(".tipso_arrow").css({"border-top-color":k.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass("top"));break;case"bottom":g=j.offset().left+j.outerWidth()/2-c(i).width/2,f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f+c(i).height>l.scrollTop()+l.outerHeight()?(f=j.offset().top-c(i).height-m,i.find(".tipso_arrow").css({"border-top-color":k.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass("top")):(i.find(".tipso_arrow").css({"border-bottom-color":n,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass(k.settings.position));break;case"left":g=j.offset().left-c(i).width-m,f=j.offset().top+j.outerHeight()/2-c(i).height/2,i.find(".tipso_arrow").css({marginTop:-k.settings.arrowWidth,marginLeft:""}),g<l.scrollLeft()?(g=j.offset().left+j.outerWidth()+m,i.find(".tipso_arrow").css({"border-right-color":k.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass("right")):(i.find(".tipso_arrow").css({"border-left-color":k.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass(k.settings.position));break;case"right":g=j.offset().left+j.outerWidth()+m,f=j.offset().top+j.outerHeight()/2-c(i).height/2,i.find(".tipso_arrow").css({marginTop:-k.settings.arrowWidth,marginLeft:""}),g+m+k.settings.width>l.scrollLeft()+l.outerWidth()?(g=j.offset().left-c(i).width-m,i.find(".tipso_arrow").css({"border-left-color":k.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass("left")):(i.find(".tipso_arrow").css({"border-right-color":k.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),i.removeClass("top bottom left right"),i.addClass(k.settings.position))}if("top-right"===k.settings.position&&i.find(".tipso_arrow").css({"margin-left":-k.settings.width/2}),"top-left"===k.settings.position){var p=i.find(".tipso_arrow").eq(0);p.css({"margin-left":k.settings.width/2-2*k.settings.arrowWidth})}if("bottom-right"===k.settings.position){var p=i.find(".tipso_arrow").eq(0);p.css({"margin-left":-k.settings.width/2,"margin-top":""})}if("bottom-left"===k.settings.position){var p=i.find(".tipso_arrow").eq(0);p.css({"margin-left":k.settings.width/2-2*k.settings.arrowWidth,"margin-top":""})}g<l.scrollLeft()&&("bottom"===k.settings.position||"top"===k.settings.position)&&(i.find(".tipso_arrow").css({marginLeft:g-k.settings.arrowWidth}),g=0),g+k.settings.width>l.outerWidth()&&("bottom"===k.settings.position||"top"===k.settings.position)&&(h=l.outerWidth()-(g+k.settings.width),i.find(".tipso_arrow").css({marginLeft:-h-k.settings.arrowWidth,marginTop:""}),g+=h),g<l.scrollLeft()&&("left"===k.settings.position||"right"===k.settings.position||"top-right"===k.settings.position||"top-left"===k.settings.position||"bottom-right"===k.settings.position||"bottom-left"===k.settings.position)&&(g=j.offset().left+j.outerWidth()/2-c(i).width/2,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f=j.offset().top-c(i).height-m,f<l.scrollTop()?(f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({"border-bottom-color":n,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i.removeClass("top bottom left right"),d(i),i.addClass("bottom")):(i.find(".tipso_arrow").css({"border-top-color":k.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i.removeClass("top bottom left right"),d(i),i.addClass("top")),g+k.settings.width>l.outerWidth()&&(h=l.outerWidth()-(g+k.settings.width),i.find(".tipso_arrow").css({marginLeft:-h-k.settings.arrowWidth,marginTop:""}),g+=h),g<l.scrollLeft()&&(i.find(".tipso_arrow").css({marginLeft:g-k.settings.arrowWidth}),g=0)),g+k.settings.width>l.outerWidth()&&("left"===k.settings.position||"right"===k.settings.position||"top-right"===k.settings.position||"top-left"===k.settings.position||"bottom-right"===k.settings.position||"bottom-right"===k.settings.position)&&(g=j.offset().left+j.outerWidth()/2-c(i).width/2,i.find(".tipso_arrow").css({marginLeft:-k.settings.arrowWidth,marginTop:""}),f=j.offset().top-c(i).height-m,f<l.scrollTop()?(f=j.offset().top+j.outerHeight()+m,i.find(".tipso_arrow").css({"border-bottom-color":n,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.removeClass("top bottom left right"),i.addClass("bottom")):(i.find(".tipso_arrow").css({"border-top-color":k.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),d(i),i.removeClass("top bottom left right"),i.addClass("top")),g+k.settings.width>l.outerWidth()&&(h=l.outerWidth()-(g+k.settings.width),i.find(".tipso_arrow").css({marginLeft:-h-k.settings.arrowWidth,marginTop:""}),g+=h),g<l.scrollLeft()&&(i.find(".tipso_arrow").css({marginLeft:g-k.settings.arrowWidth}),g=0)),i.css({left:g+k.settings.offsetX,top:f+k.settings.offsetY}),f<l.scrollTop()&&("right"===k.settings.position||"left"===k.settings.position)&&(j.tipso("update","position","bottom"),e(k)),f+c(i).height>l.scrollTop()+l.outerHeight()&&("right"===k.settings.position||"left"===k.settings.position)&&(j.tipso("update","position","top"),e(k))}var f="tipso",g={speed:400,background:"#55b555",titleBackground:"#333333",color:"#ffffff",titleColor:"#ffffff",titleContent:"",showArrow:!0,position:"top",width:200,maxWidth:"",delay:200,hideDelay:0,animationIn:"",animationOut:"",offsetX:0,offsetY:0,arrowWidth:8,tooltipHover:!1,content:null,ajaxContentUrl:null,ajaxContentBuffer:0,contentElementId:null,useTitle:!1,templateEngineFunc:null,onBeforeShow:null,onShow:null,onHide:null};a.extend(b.prototype,{init:function(){var a=this,b=this.$element;this.doc;if(b.addClass("tipso_style").removeAttr("title"),a.settings.tooltipHover){var c=null,d=null;b.on("mouseover."+f,function(){clearTimeout(c),clearTimeout(d),d=setTimeout(function(){a.show()},150)}),b.on("mouseout."+f,function(){clearTimeout(c),clearTimeout(d),c=setTimeout(function(){a.hide()},200),a.tooltip().on("mouseover."+f,function(){a.mode="tooltipHover"}).on("mouseout."+f,function(){a.mode="show",clearTimeout(c),c=setTimeout(function(){a.hide()},200)})})}else b.on("mouseover."+f,function(){a.show()}),b.on("mouseout."+f,function(){a.hide()});a.settings.ajaxContentUrl&&(a.ajaxContent=null)},tooltip:function(){return this.tipso_bubble||(this.tipso_bubble=a('<div class="tipso_bubble"><div class="tipso_title"></div><div class="tipso_content"></div><div class="tipso_arrow"></div></div>')),this.tipso_bubble},show:function(){var b=this.tooltip(),c=this,d=this.win;!1===c.settings.showArrow?b.find(".tipso_arrow").hide():b.find(".tipso_arrow").show(),"hide"===c.mode&&(a.isFunction(c.settings.onBeforeShow)&&c.settings.onBeforeShow(c.$element,c.element,c),c.settings.size&&b.addClass(c.settings.size),c.settings.width?b.css({background:c.settings.background,color:c.settings.color,width:c.settings.width}).hide():c.settings.maxWidth?b.css({background:c.settings.background,color:c.settings.color,maxWidth:c.settings.maxWidth}).hide():b.css({background:c.settings.background,color:c.settings.color,width:200}).hide(),b.find(".tipso_title").css({background:c.settings.titleBackground,color:c.settings.titleColor}),b.find(".tipso_content").html(c.content()),b.find(".tipso_title").html(c.titleContent()),e(c),d.on("resize."+f,function(){c.settings.position=c.settings.preferedPosition,e(c)}),window.clearTimeout(c.timeout),c.timeout=null,c.timeout=window.setTimeout(function(){c.ieFade||""===c.settings.animationIn||""===c.settings.animationOut?b.appendTo("body").stop(!0,!0).fadeIn(c.settings.speed,function(){c.mode="show",a.isFunction(c.settings.onShow)&&c.settings.onShow(c.$element,c.element,c)}):b.remove().appendTo("body").stop(!0,!0).removeClass("animated "+c.settings.animationOut).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+c.settings.animationIn).fadeIn(c.settings.speed,function(){a(this).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a(this).removeClass("animated "+c.settings.animationIn)}),c.mode="show",a.isFunction(c.settings.onShow)&&c.settings.onShow(c.$element,c.element,c),d.off("resize."+f,null,"tipsoResizeHandler")})},c.settings.delay))},hide:function(b){var c=this,d=this.win,e=this.tooltip(),g=c.settings.hideDelay;b&&(g=0,c.mode="show"),window.clearTimeout(c.timeout),c.timeout=null,c.timeout=window.setTimeout(function(){"tooltipHover"!==c.mode&&(c.ieFade||""===c.settings.animationIn||""===c.settings.animationOut?e.stop(!0,!0).fadeOut(c.settings.speed,function(){a(this).remove(),a.isFunction(c.settings.onHide)&&"show"===c.mode&&c.settings.onHide(c.$element,c.element,c),c.mode="hide",d.off("resize."+f,null,"tipsoResizeHandler")}):e.stop(!0,!0).removeClass("animated "+c.settings.animationIn).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+c.settings.animationOut).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a(this).removeClass("animated "+c.settings.animationOut).remove(),a.isFunction(c.settings.onHide)&&"show"===c.mode&&c.settings.onHide(c.$element,c.element,c),c.mode="hide",d.off("resize."+f,null,"tipsoResizeHandler")}))},g)},close:function(){this.hide(!0)},destroy:function(){var a=this.$element,b=this.win;this.doc;a.off("."+f),b.off("resize."+f,null,"tipsoResizeHandler"),a.removeData(f),a.removeClass("tipso_style").attr("title",this._title)},titleContent:function(){var a=this.$element,b=this;return b.settings.titleContent?b.settings.titleContent:a.data("tipso-title")},content:function(){var b,c=this.$element,d=this,e=this._title;return d.settings.ajaxContentUrl?d._ajaxContent?b=d._ajaxContent:(d._ajaxContent=b=a.ajax({type:"GET",url:d.settings.ajaxContentUrl,async:!1}).responseText,d.settings.ajaxContentBuffer>0?setTimeout(function(){d._ajaxContent=null},d.settings.ajaxContentBuffer):d._ajaxContent=null):d.settings.contentElementId?b=a("#"+d.settings.contentElementId).text():d.settings.content?b=d.settings.content:!0===d.settings.useTitle?b=e:"string"==typeof c.data("tipso")&&(b=c.data("tipso")),null!==d.settings.templateEngineFunc&&(b=d.settings.templateEngineFunc(b)),b},update:function(a,b){var c=this;if(!b)return c.settings[a];c.settings[a]=b}});var h=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(""===a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1}();a[f]=a.fn[f]=function(c){var d=arguments;if(void 0===c||"object"==typeof c)return this instanceof a||a.extend(g,c),this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new b(this,c))});if("string"==typeof c&&"_"!==c[0]&&"init"!==c){var e;return this.each(function(){var g=a.data(this,"plugin_"+f);g||(g=a.data(this,"plugin_"+f,new b(this,c))),g instanceof b&&"function"==typeof g[c]&&(e=g[c].apply(g,Array.prototype.slice.call(d,1))),"destroy"===c&&a.data(this,"plugin_"+f,null)}),void 0!==e?e:this}}});